<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Magnus — Quick Registration</title>
  <meta name="description" content="Submit your details to register. Data goes straight to our Google Sheet." />
  <style>
    :root { color-scheme: dark light; }
    html,body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      background: #0F172A;
      color: #fff;
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .card {
      width: 100%;
      max-width: 560px;
      background: linear-gradient(135deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(14px);
      border-radius: 16px;
      padding: 22px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    h1 { margin: 0 0 10px; font-size: 1.35rem; }
    p  { margin: .25rem 0 1.1rem; opacity: .85; }
    .row { margin-bottom: 14px; }
    label { display: block; margin: 0 0 6px; font-size: .95rem; opacity: .95; }
    input {
      width: 100%; padding: 12px 14px;
      border-radius: 12px; border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.04); color: #fff; outline: none;
    }
    input::placeholder { color: #cbd5e1; }
    button {
      width: 100%; padding: 12px 16px; border-radius: 12px;
      border: none; cursor: pointer; font-weight: 700; letter-spacing: .2px;
      background: #F97316; /* orange */
      box-shadow: 0 12px 28px rgba(249,115,22,.25);
    }
    .ok,.err { display: none; margin-top: 12px; padding: 12px; border-radius: 10px; }
    .ok  { background: rgba(16,185,129,.12); border: 1px solid rgba(16,185,129,.35); }
    .err { background: rgba(239,68,68,.12); border: 1px solid rgba(239,68,68,.35); }
    .small { font-size: .85rem; opacity: .8; }
    .footer { text-align: center; margin-top: 14px; opacity: .7; font-size: .85rem; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Quick Registration</h1>
    <p>Fill this form; your details will be added to our secure Google Sheet instantly.</p>

    <form id="regForm" novalidate>
      <div class="row">
        <label for="name">Full name</label>
        <input id="name" name="name" type="text" placeholder="John Doe" required />
      </div>
      <div class="row">
        <label for="phone">Phone number</label>
        <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="0803 123 4567" required />
      </div>
      <div class="row">
        <label for="gmail">Gmail address</label>
        <input id="gmail" name="gmail" type="email" placeholder="example@gmail.com" required />
      </div>

      <!-- If you enable SECRET in Code.gs, uncomment the next line and set the same value -->
      <!-- <input type="hidden" name="secret" value="YOUR_SECRET_HERE"> -->

      <button id="btn" type="submit">Submit</button>

      <div id="ok"  class="ok">✅ Thanks! Your details were received.</div>
      <div id="err" class="err">⚠️ Couldn’t submit. Please try again.</div>

      <p class="small">Note: This posts securely to our Google Apps Script endpoint — no page reload.</p>
    </form>
    <div class="footer">Magnus Platform</div>
  </div>

  <script>
    // Your live Web App URL from Apps Script (ends with /exec)
    const ENDPOINT = 'https://script.google.com/macros/s/AKfycbzePr10E4W_OfdkPrzb16okYUPoIP9RI4IPwYSbS_kOO35PCxUpk09J_bTUALiU2Iuw/exec';

    const form = document.getElementById('regForm');
    const okEl = document.getElementById('ok');
    const errEl = document.getElementById('err');
    const btn  = document.getElementById('btn');

    // Build application/x-www-form-urlencoded body (avoids CORS preflight)
    function toFormEncoded(data) {
      return Object.keys(data)
        .map(k => encodeURIComponent(k) + '=' + encodeURIComponent(data[k]))
        .join('&');
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const name  = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const gmail = document.getElementById('gmail').value.trim();

      if (!name || !phone || !gmail) { alert('Please fill all fields.'); return; }
      if (!/@gmail\.com\s*$/i.test(gmail)) { alert('Please enter a Gmail address (must end with @gmail.com).'); return; }

      btn.disabled = true; btn.textContent = 'Submitting...';
      okEl.style.display = 'none'; errEl.style.display = 'none';

      try {
        const res = await fetch(ENDPOINT, {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
          body: toFormEncoded({ name, phone, gmail })
        });

        if (res.ok) {
          okEl.style.display = 'block';
          form.reset();
        } else {
          errEl.style.display = 'block';
        }
      } catch (err) {
        errEl.style.display = 'block';
      } finally {
        btn.disabled = false; btn.textContent = 'Submit';
      }
    });
  </script>
</body>
</html>
